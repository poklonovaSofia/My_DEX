// =================== FIIT DEX Project =================== // 
//                      Design Document                      //
// ========================================================= //  

# TODO: OdstrÃ¡niÅ¥ tento riadok a napÃ­saÅ¥ menÃ¡ autorov do dokumentÃ¡cie

1. Vysvetlite, preÄo pridÃ¡vanie a odoberanie likvidity na vaÅ¡ej burze nezmenÃ­ vÃ½mennÃ½ kurz.

# TODO: napÃ­Å¡te odpoveÄ na otÃ¡zku 1

    PridÃ¡vanie a uberanie likvidity na naÅ¡ej DEX nemenÃ­ vÃ½mennÃ½ kurz, pretoÅ¾e tieto operÃ¡cie sa
vykonÃ¡vajÃº Ãºmerne aktuÃ¡lnemu pomeru rezerv tokenov (MIR) a ETH v poole. Zmluva TokenExchange
pouÅ¾Ã­va model tvorcu trhu s konÅ¡tantnÃ½m produktom (x - y = k), kde x predstavuje rezervy
tokenov a y predstavuje rezervy ETH.
Pri pridÃ¡vanÃ­ likvidity addLiquidity pouÅ¾Ã­vateÄ¾ poÅ¡le mnoÅ¾stvo ETH msg.value a zodpovedajÃºce
mnoÅ¾stvo tokenov, ktorÃ© sa vypoÄÃ­ta ako: requiredTokens = msg.value - token_reserves/eth_reserves
    TÃ½m sa zabezpeÄÃ­, Å¾e pomer token_reserves eth_reserves (vÃ½mennÃ½ kurz) zostane nezmenenÃ½. NaprÃ­klad,
ak mÃ¡ pool 5000 MIR a 5000 ETH (kurz 1:1), pridanie 100 ETH si vyÅ¾aduje 100 MIR, vÃ½sledkom
Äoho je 5100 MIR a 5100 ETH, priÄom sa zachovÃ¡ kurz 1:1.
    Podobne je to aj pri odstraÅˆovanÃ­ likvidity (removeLiquidity, removeAllLiquidity),
pouÅ¾Ã­vateÄ¾ dostane ETH a tokeny ÃºmernÃ© jeho prÃ­spevku:
TokensToReturn = sumaETH - token_reserves/eth_reserves
    TÃ½m sa zachovÃ¡ aj pomer rezerv. KonÅ¡tanta k sa aktualizuje po kaÅ¾dej operÃ¡cii
(k = token_reserves - eth_reserves), ÄÃ­m sa zabezpeÄÃ­ stabilita pomeru



2. K bonusu - Vysvetlite svoju schÃ©mu odmeÅˆovania poskytovateÄ¾ov likvidity a zdÃ´vodnite rozhodnutia o dizajne, ktorÃ© ste urobili. Ako spÄºÅˆa poÅ¾iadavky na odmeny za likviditu uvedenÃ© v sekcii 7?
# TODO: napÃ­Å¡te odpoveÄ na otÃ¡zku 2
NÃ¡Å¡ DEX implementuje systÃ©m odmeÅˆovania prostrednÃ­ctvom 3 % swapovÃ©ho poplatku (swap_fee_numerator = 3, swap_fee_denominator = 100). Poplatok sa poÄas swapov (swapTokensForETH, swapETHForTokens)
odpoÄÃ­tava z vÃ½stupnej sumy a zostÃ¡va v poole, ÄÃ­m sa zvyÅ¡ujÃº rezervy.
Rozhodnutia o nÃ¡vrhu:
Poplatok sa aplikuje na vÃ½stupnÃ© aktÃ­vum (ETH alebo tokeny) po vÃ½poÄte vÃ½stupnej sumy pomocou vzorca poolu. NaprÃ­klad v prÃ­pade swapTokensForETH:
    ethOut = (amountTokens - eth_reserves)/(token_reserves + amountTokens)
    fee = (ethOut - swap_fee_numerator)/swap_fee_denominator
    ethOut = ethOut - poplatok
- Poplatok zvyÅ¡uje eth_reserves alebo token_reserves, Äo je proporcionÃ¡lne rozdelÃ­ poskytovateÄ¾om likvidity pri vÃ½bere.
- Poskytovatelia dostanÃº odmenu ÃºmernÃº ich prÃ­spevku (lps[msg.sender]), keÄÅ¾e vÃ¤ÄÅ¡ie rezervy znamenajÃº viac aktÃ­v pri vÃ½bere.

SÃºlad s poÅ¾iadavkami oddielu 7:
- Sekcia 7 vyÅ¾aduje spravodlivÃ© rozdelenie odmien. NaÅ¡a schÃ©ma zabezpeÄuje, Å¾e poplatky sa automaticky pripoÄÃ­tavajÃº k fondu a poskytovatelia dostÃ¡vajÃº proporcionÃ¡lnu
podiel pri vÃ½bere.
- Poplatok vo vÃ½Å¡ke 3 % je Å¡tandardom pre DEXy (napr. Uniswap), ktorÃ½ vyvaÅ¾uje atraktÃ­vnosÅ¥ pre obchodnÃ­kov a odmeny pre poskytovateÄ¾ov.

OdÃ´vodnenie:
- JednoduchosÅ¥: Poplatky sÃº bezproblÃ©movo integrovanÃ© do poolu bez toho, aby sa vyÅ¾adovali ÄalÅ¡ie Å¾etÃ³ny odmien.
- SpravodlivosÅ¥: Odmeny sÃº ÃºmernÃ© prÃ­spevkom.
- OdolnosÅ¥ voÄi Ãºtokom: Kontroly sklzu (min_exchange_rate, max_exchange_rate) zmierÅˆujÃº sendviÄovÃ© Ãºtoky a chrÃ¡nia rezervy.



3. PopÃ­Å¡te aspoÅˆ jednu metÃ³du, ktorÃº ste pouÅ¾ili na minimalizÃ¡ciu spotreby gas pri kontrakte burzy. PreÄo bola tÃ¡to metÃ³da efektÃ­vna?
# TODO: napÃ­saÅ¥ odpoveÄ na otÃ¡zku 3
Jednou z metÃ³d na minimalizÃ¡ciu spotreby plynu bolo vykonÃ¡vanie kontrol sklzu current_exchange_rate pred vykonanÃ­m nÃ¡kladnÃ½ch operÃ¡ciÃ­, ako je transferFrom alebo transfer, vo funkciÃ¡ch ako addLiquidity a swapTokensForETH. NaprÃ­klad v addLiquidity:

uint current_exchange_rate = (token_reserves * 1e18) / eth_reserves;
 require( current_exchange_rate >= min_exchange_rate && current_exchange_rate <= max_exchange_rate,
â€Exchange rate out of boundsâ€œ );

Kontrola sa vykonÃ¡va vÄas, Äo umoÅ¾Åˆuje transakciu vrÃ¡tiÅ¥ pred nÃ¡kladnÃ½mi operÃ¡ciami (napr. prevodmi tokenov).
ÃšÄinnosÅ¥:
- Prevody tokenov (transferFrom) stoja podstatne viac plynu  50 000) ako kurz
vÃ½poÄty ( 1 000 - 2 000).
- VÄasnÃ© kontroly Å¡etria plyn, ak je sadzba mimo hranÃ­c, ÄÃ­m sa zniÅ¾ujÃº nÃ¡klady pouÅ¾Ã­vateÄ¾ov


4. VoliteÄ¾nÃ¡ spÃ¤tnÃ¡ vÃ¤zba:
4a. KoÄ¾ko Äasu ste strÃ¡vili na zadanÃ­?
# TODO: odpovedaÅ¥ na otÃ¡zku 4(a)
  Na projekte sa strÃ¡vilo pribliÅ¾ne 20 hodÃ­n vrÃ¡tane kÃ³dovania, testovania, ladenia a dokumentÃ¡cie,
  vrÃ¡tane toho, Å¾e sme to urobili v dvoch( Sofiia && Yulian)

4b. AkÃ¡ je jedna vec, ktorÃ¡ by bola uÅ¾itoÄnÃ¡, keby ste ju vedeli predtÃ½m ako ste zaÄali pracovaÅ¥ na zadanÃ­ 2?

# TODO: odpovdaÅ¥ na otÃ¡zku 4(b)
{UÅ¾itoÄnÃ© predchÃ¡dzajÃºce znalosti: Pochopenie spracovania chÃ½b v Solidity (napr. require vs evert)
a interakciÃ­ s Ethers.js by urÃ½chlilo ladenie problÃ©mov, ako sÃº nefunkÄnÃ© tlaÄidlÃ¡.

4c. Keby ste mohli zmeniÅ¥ jednu vec v tomto zadanÃ­, Äo by to bolo?

# TODO: odpovedaÅ¥ na otÃ¡zku 4(c)
JasnejÅ¡Ã­ popis maxSlippagePct a min_exchange_rate v priradenÃ­ by sa prediÅ¡lo nedorozumeniam

4d. ProsÃ­m pridajte nÃ¡m akÃ½koÄ¾vek feedback alebo spÃ¤tnÃº vÃ¤zbu, ktorÃ½ mÃ¡te na mysli alebo na srdci ğŸ˜Š.

# TODO: odpovedaÅ¥ na otÃ¡zku 4(d)
Ãšloha bola nÃ¡roÄnÃ¡, ale veÄ¾mi pouÄnÃ¡ pre pochopenie DEXov a inteligentnÃ½ch kontraktov. Viac prÃ­kladov kÃ³du v pokynoch by zjednoduÅ¡ilo zaÄiatok
